{"ast":null,"code":"import { verify } from 'jsonwebtoken';\nexport const APP_SECRET = 'appsecret321';\nexport function getUserId(context) {\n  const Authorization = context.request.get('Authorization');\n\n  if (Authorization) {\n    const token = Authorization.replace('Bearer ', '');\n    const verifiedToken = verify(token, APP_SECRET);\n    return verifiedToken && verifiedToken.userId;\n  }\n}","map":{"version":3,"sources":["/Users/danielkov/projects/DevStarter/server/utils.ts"],"names":["verify","APP_SECRET","getUserId","context","Authorization","request","get","token","replace","verifiedToken","userId"],"mappings":"AAAA,SAASA,MAAT,QAAuB,cAAvB;AAGA,OAAO,MAAMC,UAAU,GAAG,cAAnB;AAMP,OAAO,SAASC,SAAT,CAAmBC,OAAnB,EAAqC;AAC1C,QAAMC,aAAa,GAAGD,OAAO,CAACE,OAAR,CAAgBC,GAAhB,CAAoB,eAApB,CAAtB;;AACA,MAAIF,aAAJ,EAAmB;AACjB,UAAMG,KAAK,GAAGH,aAAa,CAACI,OAAd,CAAsB,SAAtB,EAAiC,EAAjC,CAAd;AACA,UAAMC,aAAa,GAAGT,MAAM,CAACO,KAAD,EAAQN,UAAR,CAA5B;AACA,WAAOQ,aAAa,IAAIA,aAAa,CAACC,MAAtC;AACD;AACF","sourcesContent":["import { verify } from 'jsonwebtoken';\nimport { Context } from './context';\n\nexport const APP_SECRET = 'appsecret321';\n\ninterface Token {\n  userId: string;\n}\n\nexport function getUserId(context: Context) {\n  const Authorization = context.request.get('Authorization');\n  if (Authorization) {\n    const token = Authorization.replace('Bearer ', '');\n    const verifiedToken = verify(token, APP_SECRET) as Token;\n    return verifiedToken && verifiedToken.userId;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}