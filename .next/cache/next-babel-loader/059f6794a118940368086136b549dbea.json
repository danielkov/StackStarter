{"ast":null,"code":"import { verify } from 'jsonwebtoken';\nexport const APP_SECRET = 'appsecret321';\nexport function getUserId(context) {\n  console.log({\n    context\n  });\n  const Authorization = context.request.get('Authorization');\n\n  if (Authorization) {\n    const token = Authorization.replace('Bearer ', '');\n    const verifiedToken = verify(token, APP_SECRET);\n    return verifiedToken && verifiedToken.userId;\n  }\n}","map":{"version":3,"sources":["/Users/danielkov/projects/DevStarter/prisma/utils.ts"],"names":["verify","APP_SECRET","getUserId","context","console","log","Authorization","request","get","token","replace","verifiedToken","userId"],"mappings":"AAAA,SAASA,MAAT,QAAuB,cAAvB;AAGA,OAAO,MAAMC,UAAU,GAAG,cAAnB;AAMP,OAAO,SAASC,SAAT,CAAmBC,OAAnB,EAAqC;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAY;AAAEF,IAAAA;AAAF,GAAZ;AACA,QAAMG,aAAa,GAAGH,OAAO,CAACI,OAAR,CAAgBC,GAAhB,CAAoB,eAApB,CAAtB;;AACA,MAAIF,aAAJ,EAAmB;AACjB,UAAMG,KAAK,GAAGH,aAAa,CAACI,OAAd,CAAsB,SAAtB,EAAiC,EAAjC,CAAd;AACA,UAAMC,aAAa,GAAGX,MAAM,CAACS,KAAD,EAAQR,UAAR,CAA5B;AACA,WAAOU,aAAa,IAAIA,aAAa,CAACC,MAAtC;AACD;AACF","sourcesContent":["import { verify } from 'jsonwebtoken';\nimport { Context } from './context';\n\nexport const APP_SECRET = 'appsecret321';\n\ninterface Token {\n  userId: string;\n}\n\nexport function getUserId(context: Context) {\n  console.log({ context });\n  const Authorization = context.request.get('Authorization');\n  if (Authorization) {\n    const token = Authorization.replace('Bearer ', '');\n    const verifiedToken = verify(token, APP_SECRET) as Token;\n    return verifiedToken && verifiedToken.userId;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}