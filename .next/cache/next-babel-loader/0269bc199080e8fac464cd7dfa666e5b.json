{"ast":null,"code":"import { verify } from 'jsonwebtoken';\nexport const APP_SECRET = 'appsecret321';\nexport const getUserId = context => {\n  const {\n    Authorization\n  } = context.req.headers;\n  console.log(context.req.headers);\n\n  if (Authorization) {\n    const token = Authorization.replace('Bearer ', '');\n    const verifiedToken = verify(token, APP_SECRET);\n    return verifiedToken && verifiedToken.userId;\n  }\n};","map":{"version":3,"sources":["/Users/danielkov/projects/DevStarter/prisma/utils.ts"],"names":["verify","APP_SECRET","getUserId","context","Authorization","req","headers","console","log","token","replace","verifiedToken","userId"],"mappings":"AAAA,SAASA,MAAT,QAAuB,cAAvB;AAGA,OAAO,MAAMC,UAAU,GAAG,cAAnB;AAMP,OAAO,MAAMC,SAAS,GAAIC,OAAD,IAAsB;AAC7C,QAAM;AAAEC,IAAAA;AAAF,MAAoBD,OAAO,CAACE,GAAR,CAAYC,OAAtC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYL,OAAO,CAACE,GAAR,CAAYC,OAAxB;;AACA,MAAIF,aAAJ,EAAmB;AACjB,UAAMK,KAAK,GAAGL,aAAa,CAACM,OAAd,CAAsB,SAAtB,EAAiC,EAAjC,CAAd;AACA,UAAMC,aAAa,GAAGX,MAAM,CAACS,KAAD,EAAQR,UAAR,CAA5B;AACA,WAAOU,aAAa,IAAIA,aAAa,CAACC,MAAtC;AACD;AACF,CARM","sourcesContent":["import { verify } from 'jsonwebtoken';\nimport { Context } from './context';\n\nexport const APP_SECRET = 'appsecret321';\n\ninterface Token {\n  userId: string;\n}\n\nexport const getUserId = (context: Context) => {\n  const { Authorization } = context.req.headers;\n  console.log(context.req.headers);\n  if (Authorization) {\n    const token = Authorization.replace('Bearer ', '');\n    const verifiedToken = verify(token, APP_SECRET) as Token;\n    return verifiedToken && verifiedToken.userId;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}